(this.webpackJsonpclientapp=this.webpackJsonpclientapp||[]).push([[0],{20:function(e,t,a){},43:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(1),n=a.n(c),r=a(30),i=a.n(r),l=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,66)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),n(e),r(e)}))},o=(a(40),a(41),a(43),a(6)),d=a(4),j=(a(20),function(){return Object(s.jsx)("footer",{className:"footer py-3",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("span",{className:"text-muted",children:["\xa9 ",(new Date).getFullYear(),", created by",Object(s.jsx)("a",{href:"https://emmysteven.com",target:"blank",children:" emmysteven"})]})})})}),b=a(2),m=a(31),u=a.n(m).a.create({baseURL:"https://127.0.0.1:3000/api",crossdomain:!0,headers:{"Content-Type":"application/json; charset=utf-8","Cache-Control":"no-cache"}});function h(e){var t,a,s,c;if(e instanceof Array)return e.map((function(e){return"object"===typeof e&&(e=h(e)),e}));for(a in t={},e)e.hasOwnProperty(a)&&(s=(a.charAt(0).toLowerCase()+a.slice(1)||a).toString(),((c=e[a])instanceof Array||null!==c&&c.constructor===Object)&&(c=h(c)),t[s]=c);return t}u.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var O=Object(c.createContext)(null),p=a(32),x=a(33),v=a(16),f=new(function(){function e(){Object(p.a)(this,e),this.isForbidden=!1,this.data={token:"",refreshToken:""},this.isLoggedIn=function(e){var t=localStorage.getItem("token");if(null!==t&&void 0!==t&&""!==t)return e({token:t,user:h(Object(v.a)(t))})}}return Object(x.a)(e,[{key:"login",value:function(e,t){var a=this;return u.post("/user/login",{email:e,password:t}).then((function(e){return e.data&&(a.data=e.data,localStorage.setItem("token",a.data.token),localStorage.setItem("refreshToken",a.data.refreshToken)),e.data.user=h(Object(v.a)(a.data.token)),e})).catch((function(e){return e.response?e.response:e.request?e.request:e.message}))}},{key:"register",value:function(e){var t=e.firstName,a=e.lastName,s=e.email,c=e.phoneNumber,n=e.password;return u.post("/user/register",{firstName:t,lastName:a,email:s,phoneNumber:c,password:n}).then((function(e){return e})).catch((function(e){return e.response?e.response:e.request?e.request:e.message}))}},{key:"logout",value:function(){return localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}}]),e}()),N=function(){var e=Object(c.useContext)(O),t=e.userData,a=e.setUserData,n=Object(b.f)();return Object(s.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top",children:[Object(s.jsx)(d.c,{className:"navbar-brand",to:"/",children:"Restaurant"}),Object(s.jsx)("button",{type:"button","data-toggle":"collapse",className:"navbar-toggler","data-target":"#navbarDefault","aria-controls":"navbarDefault","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(s.jsx)("span",{className:"navbar-toggler-icon"})}),Object(s.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarDefault",children:[Object(s.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(d.c,{className:"nav-link nav-item",to:"/about",children:"About"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(d.c,{className:"nav-link nav-item",to:"/contact",children:"Contact"})})]}),t.user?Object(s.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("div",{className:"nav-link",role:"button",onClick:function(){f.logout(),a({token:void 0,user:void 0}),n.push("/login")},children:"Logout"})})}):Object(s.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(d.c,{className:"nav-link nav-item",to:"/login",children:"Login"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(d.c,{className:"nav-link nav-item",to:"/register",children:"Register"})})]})]})]})},g=a(11),k=a(12);var y=function(){return u.get("shop").then((function(e){return e.data}))},w=a.p+"static/media/shop.c96bc89f.jpg",C=Object(s.jsx)("div",{className:"mt-5",children:Object(s.jsxs)(b.c,{children:[Object(s.jsx)(b.a,{path:"/",exact:!0,component:function(){var e=Object(b.f)();return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"",children:["Want to start out with us? Well you're at the right place"," ",Object(s.jsx)("span",{role:"img","aria-label":"wizard",children:" \ud83e\uddd9\u200d\u2642\ufe0f"})]}),Object(s.jsx)("button",{className:"btn btn-dark mx-3 my-2",onClick:function(){e.push("/login")},children:"Login"})]})}}),Object(s.jsx)(b.a,{path:"/home",exact:!0,component:function(){var e=Object(c.useContext)(O).userData,t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],r=a[1];Object(c.useEffect)((function(){y().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();r(t)}))}),[]);var i=n.map((function(e){return Object(s.jsx)("div",{className:"col-md-3 offset-md-0",children:Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("img",{className:"card-img-top",src:w,alt:""}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsxs)("h5",{className:"card-title",children:["Name: ",e.name]}),Object(s.jsxs)("p",{className:"card-text",children:["Website: ",e.website]}),Object(s.jsxs)("p",{className:"card-text",children:["Email: ",e.email]}),Object(s.jsxs)("p",{className:"card-text",children:["Phone: ",e.phoneNumber]}),Object(s.jsxs)("p",{className:"card-text",children:["State: ",e.state]}),Object(s.jsxs)("p",{className:"card-text",children:["LGA: ",e.localGovernmentArea]}),Object(s.jsxs)("p",{className:"card-text",children:["Address: ",e.address]})]})]})},e.id)}));return Object(s.jsx)("div",{children:e.user?Object(s.jsxs)("div",{className:"",children:[Object(s.jsxs)("h1",{className:"mb-4",children:["Hi ",e.user.firstName,"!"]}),Object(s.jsx)("div",{className:"card-deck",children:i})]}):Object(s.jsxs)("div",{className:"col-lg-8 offset-lg-2",children:[Object(s.jsx)("h1",{children:"Hi Guest!"}),Object(s.jsx)("p",{children:"You're not logged in with React Hooks!!"})]})})}}),Object(s.jsx)(b.a,{path:"/login",component:function(){var e=Object(c.useState)({email:"",password:""}),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),i=Object(o.a)(r,2),l=i[0],j=i[1],m=Object(c.useState)(null),u=Object(o.a)(m,2),h=u[0],p=u[1],x=Object(c.useState)(!1),v=Object(o.a)(x,2),N=v[0],y=v[1],w=a.email,C=a.password,S=Object(c.useContext)(O).setUserData,L=Object(b.f)();function D(e){var t=e.target,a=t.name,s=t.value;n((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(g.a)({},a,s))}))}return Object(s.jsx)("div",{className:"col-md-3 offset-md-5",children:Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("h4",{className:"card-header",children:"Login"}),Object(s.jsxs)("div",{className:"card-body",children:[h?Object(s.jsxs)("div",{className:"alert alert-danger mb-4",children:[" ",h," "]}):"",Object(s.jsxs)("form",{name:"form",onSubmit:function(e){e.preventDefault(),y(!0),j(!0),w&&C&&f.login(w,C).then((function(e){if(e.data.error)return y(!1),j(!1),p(e.data.error);S({token:e.data.token,user:e.data.user}),y(!1),L.push("/")}))},autoComplete:"off",children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"Email",children:"Email"}),Object(s.jsx)("input",{type:"text",name:"email",value:w,onChange:D,className:"form-control"+(l&&!w?" is-invalid":"")}),l&&!w&&Object(s.jsx)("div",{className:"invalid-feedback",children:"Email is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"Password",children:"Password"}),Object(s.jsx)("input",{type:"password",name:"password",value:C,onChange:D,className:"form-control"+(l&&!C?" is-invalid":"")}),l&&!C&&Object(s.jsx)("div",{className:"invalid-feedback",children:"Password is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsxs)("button",{className:"btn btn-primary",children:[N&&Object(s.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"]}),Object(s.jsx)(d.b,{to:"/register",className:"btn btn-link",children:"Register"})]})]})]})]})})}}),Object(s.jsx)(b.a,{path:"/contact",component:function(){var e=Object(b.f)();return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"m-3",children:["Want to contact us? Well you're at the right place"," ",Object(s.jsx)("span",{role:"img","aria-label":"wizard",children:" \ud83e\uddd9\u200d\u2642\ufe0f"})]}),Object(s.jsx)("button",{className:"btn btn-dark mx-3 my-2",onClick:function(){e.push("/")},children:"Back To Home"})]})}}),Object(s.jsx)(b.a,{path:"/register",component:function(){var e=Object(c.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:""}),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),i=Object(o.a)(r,2),l=i[0],j=i[1],m=Object(c.useState)(!1),u=Object(o.a)(m,2),h=u[0],O=u[1],p=Object(b.f)();function x(e){var t=e.target,a=t.name,s=t.value;n((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(g.a)({},a,s))}))}return Object(s.jsx)("div",{className:"col-md-5 offset-md-3",children:Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("h4",{className:"card-header",children:"Register"}),Object(s.jsxs)("div",{className:"card-body",children:[l?Object(s.jsxs)("div",{className:"alert alert-danger mb-4",children:[" ",l," "]}):"",Object(s.jsxs)("form",{name:"form",onSubmit:function(e){e.preventDefault(),O(!0),a.firstName&&a.lastName&&a.email&&a.phoneNumber&&a.password&&f.register(a).then((function(e){if(e.data.error)return O(!1),j(e.data.error);p.push("/login")}))},children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"First Name"}),Object(s.jsx)("input",{type:"text",name:"firstName",value:a.firstName,onChange:x,className:"form-control"+(h&&!a.firstName?" is-invalid":"")}),h&&!a.firstName&&Object(s.jsx)("div",{className:"invalid-feedback",children:"First Name is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Last Name"}),Object(s.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:x,className:"form-control"+(h&&!a.lastName?" is-invalid":"")}),h&&!a.lastName&&Object(s.jsx)("div",{className:"invalid-feedback",children:"Last Name is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Email"}),Object(s.jsx)("input",{type:"email",name:"email",value:a.email,onChange:x,className:"form-control"+(h&&!a.email?" is-invalid":"")}),h&&!a.email&&Object(s.jsx)("div",{className:"invalid-feedback",children:"Email is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Phone Number"}),Object(s.jsx)("input",{type:"tel",name:"phoneNumber",value:a.phoneNumber,onChange:x,className:"form-control"+(h&&!a.phoneNumber?" is-invalid":"")}),h&&!a.phoneNumber&&Object(s.jsx)("div",{className:"invalid-feedback",children:"Phone Number is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{type:"password",name:"password",value:a.password,onChange:x,className:"form-control"+(h&&!a.password?" is-invalid":"")}),h&&!a.password&&Object(s.jsx)("div",{className:"invalid-feedback",children:"Password is required"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsxs)("button",{className:"btn btn-primary",children:[h&&Object(s.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Register"]}),Object(s.jsx)(d.b,{to:"/login",className:"btn btn-link",children:"Cancel"})]})]})]})]})})}}),Object(s.jsx)(b.a,{path:"/about",component:function(){var e=Object(b.f)();return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"m-3",children:["Want to contact us? Well you're at the right place"," ",Object(s.jsx)("span",{role:"img","aria-label":"wizard",children:" \ud83e\uddd9\u200d\u2642\ufe0f"})]}),Object(s.jsx)("button",{className:"btn btn-dark mx-3 my-2",onClick:function(){e.push("/")},children:"Back To Home"})]})}}),Object(s.jsx)(b.a,{path:"/",component:function(){var e=Object(b.f)();return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"m-3",children:["Oops! The page you are looking for does not exist"," ",Object(s.jsx)("span",{role:"img","aria-label":"sad face",children:"\ud83d\ude25"})]}),Object(s.jsx)("p",{className:"m-3",children:"Maybe try another page?"}),Object(s.jsx)("button",{className:"btn btn-dark mx-3 my-2",onClick:function(){e.push("/")},children:"Back To Home"})]})}})]})});function S(){var e=Object(c.useState)({token:void 0,user:void 0}),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){f.isLoggedIn(n)}),[]),Object(s.jsx)(d.a,{children:Object(s.jsx)(O.Provider,{value:{userData:a,setUserData:n},children:Object(s.jsxs)("div",{className:"App","data-testid":"app",children:[Object(s.jsx)(N,{}),C,Object(s.jsx)(j,{})]})})})}i.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(S,{})}),document.getElementById("root")),l()}},[[65,1,2]]]);
//# sourceMappingURL=main.3d0f7ec9.chunk.js.map